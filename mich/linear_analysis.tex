\documentclass{article}

\def\npart {II}
\def\nyear {2017}
\def\nterm {Michaelmas}
\def\nlecturer{Dr R.\ Bauerschmidt}
\def\ncourse{Linear Analysis}
\input{header}

% preamble
\setcounter{section}{-1}
\newcommand{\K}{\mathbb{K}}
% and here we go!

\begin{document}
\maketitle

\tableofcontents

% statslab.cam.ac.uk/~rb812/teaching/la2017
\section{Introduction}
As the name suggests, Linear Analysis is the study of linear spaces of functions, mostly infinite dimensional. In particular, properties like convexity, completeness, closedness are of interest here.
Like any pure course, we start with a lot of definitions which come out of nowhere, and then clear them up, but functional analysis is not devoid of functional analysis. In particular, in the field of differential equations both ordinary and partial it is often useful to view the differential operators as a linear operator on a space of functions. Markov processes can also be seen using a transition operator, and dynamical processes are given by a measure preserving map, all fitting into the realm of linear maps.  Quantum mechanics to a certain extent is the study of the spectrum of certain self-adjoint linear operators on a Hilbert space, and so requires functional analysis.
As much as possible, examples of applications will be given briefly.

\section{Normed vector spaces}
Unless stated, vector spaces will be either over the real numbers or the complex numbers, denoted by $\K$ to represent $\R$ or $\C$.

\subsection{Topology of vector spaces}
\begin{defi}[\hypertarget{def:normedVectorSpace}{Normed vector space}]
    A \textbf{normed vector space} is a vector space $V$ with a norm $\norm{\cdot}: V \to \R$ satisfying
    \begin{enumerate}[label=\roman*.]
        \item $\norm{v} \geq 0$ for all $v \in V$ and $\norm{v} = 0$ if $v=0$. (Positive definite)
        \item $\norm{\lambda v} = \abs{\lambda} \norm{v}$ for every $v \in V$ and $\lambda \in K$. (Positive homogeneous)
        \item $\norm{v + w} \leq \norm{v} + \norm{w}$ for all $v, w \in V$. (Triangle inequality)
    \end{enumerate}
\end{defi}
In particular, a metric\label{def:metric-on-vector-space} on $V$ is defined by $d(v, w) = \norm{v - w}$.

\begin{fact}
    The vector space operations of scalar multiplication and vector addition are continuous.
    \begin{align*}
        K \times V &\to V & (\lambda, v) &\mapsto \lambda v \\
        V \times V &\to V & (v, w) &\mapsto v + w
    \end{align*}
\end{fact}

\begin{proof}
    We only check that scalar multiplication is continuous. Since $K$ and $V$ are \hyperlink{def:metric-on-vector-space}{metric spaces}, it suffices to show that $\lambda_j \to \lambda$ and $v_j \to v$ implies $\lambda_j v_j \to \lambda v$. But
    \begin{align*}
        \norm{\lambda_j v_j - \lambda v} &= \norm{(\lambda_j - \lambda) v_j + \lambda(v_j - v)} \\
                                         &\leq \underbrace{\abs{\lambda_j - \lambda}}_\text{$\to 0$} \underbrace{\norm{v_j}}_\text{bounded} + \abs{\lambda} \underbrace{\norm{v_j - v}}_\text{$\to 0$}
    \end{align*}
    as required.
\end{proof}

\begin{cor}
    Translations $(v \mapsto v + v_0)$ and dilations $(v \mapsto \lambda v, \lambda \ne 0)$ are homomorphisms.
\end{cor}

\begin{defi}[\hypertarget{def:topologicalVectorSpace}{Topological vector space}]
    A \textbf{topological vector space} is a vector space together with a topology that makes the vector space operations continuous and in which points are closed.
\end{defi}
% (Prop: A topological vector space is Hausdorff)

\begin{notation}
    For a subset $C$ of a vector space $V$ over $\K$ and $t \in \K$, we write $t C$ for the following subset:
    \begin{equation*}
        t C \coloneqq \Set{t v | v \in C}
    \end{equation*}
\end{notation}

\begin{defi}[\hypertarget{def:convexSubs}{Convex subset}]
    Let $V$ be a vector space and $C \subset V$ a subset.  We say that $C$ is \textbf{convex} iff $t C + (1-t) C \subset C$ for all $t \in [0, 1]$. Specifically, this means $t v + (1-t) w \in C$ for all $v, w \in C$ and $t \in [0, 1]$.
\end{defi}

\begin{fact}
    Let $V$ be a \hyperlink{def:normedVectorSpace}{normed vector space}. Then $B_1(0)$ is \hyperlink{def:convexSubs}{convex}.
\end{fact}

\begin{fact}
    If $C$ is \hyperlink{def:convexSubs}{convex}, then $v + \lambda C$ is convex for all $\lambda \in K$ and $v \in V$.
\end{fact}

\begin{defi}[\hypertarget{def:locallyConvex}{Locally convex space}]
    A \hyperlink{def:topologicalVectorSpace}{topological vector space} is \textbf{locally convex} if its topology has a basis of \hyperlink{def:convexSubs}{convex} sets.
\end{defi}

\begin{defi}[\hypertarget{def:boundedSubs}{Bounded subset}]
    Let $V$ be a \hyperlink{def:topologicalVectorSpace}{topological vector space} and $B \subset V$. We say that $B$ is \textbf{bounded} if for every open neighbourhood $U$ of $0$, there exists $t > 0$ such that $s U \supset B$ for all $s \geq t$.
\end{defi}

\begin{defi}[\hypertarget{def:balancedSubs}{Balanced subset}]
    Let $V$ be a vector space, and $C \subset V$ a subset. Call $C$ \textbf{balanced} if for all $\abs{\lambda} \leq 1$, we have $\lambda C \subset C$.
\end{defi}

\begin{eg}
    \leavevmode
    \begin{enumerate}[label=(\roman*)]
        \item Balanced sets in $\R$ are sets of the form $[-t, t]$, $(-t, t)$, or $\{0\}$ and all of $\R$, and $\Q$ is not balanced in $\R$.
        \item In $\C$, the only balanced sets are $\{0\}$, $\C$, and the open or closed balls centred at $0$.
        \item There are more interesting examples of balanced sets in $\R^2$, for instance the open disk or any ellipse centred at $0$.
    \end{enumerate}
\end{eg}

\begin{lemma}
    Let $V$ be a \hyperlink{def:topologicalVectorSpace}{topological vector space} and $C \subset V$ be a \hyperlink{def:boundedSubs}{bounded}, \hyperlink{def:convexSubs}{convex} neighbourhood of $0$.
    Then there exists a bounded, \hyperlink{def:balancedSubs}{balanced}, {convex} neighbourhood $\widetilde C$ of $0$.
\end{lemma}

\begin{proof}
    Exercise (on example sheet).
\end{proof}

\begin{prop}
    Let $V$ be a \hyperlink{def:topologicalVectorSpace}{topological vector space} and $C \subset V$ be a \hyperlink{def:boundedSubs}{bounded}, \hyperlink{def:convexSubs}{convex} neighbourhood of $0$. Then the topology on $V$ is induced by a norm.
\end{prop}

\begin{proof}
    Use the previous lemma to construct $\widetilde C$. Let
    \begin{equation*}
        \mu_{\widetilde C}(v) = \inf\set{t > 0 | v \in t \widetilde C}
    \end{equation*}
    referred to as the Minkowski functional of $\widetilde C$.
    We claim that $\norm{v} = \mu_{\widetilde C}(v)$ is a norm on $V$ and that the topology induced by it is the same as the original topology.
    Check the \hyperlink{def:normedVectorSpace}{norm axioms} in turn:
    \begin{enumerate}[label=\roman*.]
        \item We clearly have positivity, and $\mu_{\widetilde C}(v) = 0$ iff $v = 0$ since $\widetilde C$ is \hyperlink{def:boundedSubs}{bounded}.
        \item Since $\widetilde C$ is \hyperlink{def:balancedSubs}{balanced},
            \begin{align*}
                \mu_{\widetilde C} (\lambda v) &= \inf\Set{t > 0 | \lambda v \in t \widetilde C} \\
                &= \inf\Set{t > 0 | v \in \frac{t}{\abs{\lambda}} \widetilde C} \\
                &= \inf\Set{\abs{\lambda} \frac{t}{\abs{\lambda}} > 0 | v \in \frac{t}{\abs{\lambda}} \widetilde C} \\
                &= \abs{\lambda} \mu_{\widetilde C}(v)
            \end{align*}
        \item Given $v, w \in V$, write $v = \lambda v_0$ and $w = \mu w_0$ with $\lambda, \mu > 0$, $v_0, w_0 \in \widetilde C$.
            Since $\widetilde C$ is \hyperlink{def:convexSubs}{convex},
            \begin{align*}
                &\frac{\lambda v_0 + \mu w_0}{\lambda + \mu} \in \widetilde C \\
                \implies \mu_{\widetilde C} \bigg(&\frac{\lambda v_0 + \mu w_0}{\lambda + \mu}\bigg) \leq 1
            \end{align*}
            Therefore,
            \begin{align*}
                \mu_{\widetilde C} (v + w) &= (\lambda + \mu) \ \mu_{\widetilde C} \left(\frac{\lambda v_0 + \mu w_0}{\lambda + \mu}\right) \\
                &\leq \lambda + \mu \\
                &\leq \mu_{\widetilde C}(v) + \mu_{\widetilde C}(w)
            \end{align*}
    \end{enumerate}
\end{proof}

\begin{cor}
    A \hyperlink{def:topologicalVectorSpace}{topological vector space} is normable iff it is \hyperlink{def:locallyConvex}{locally convex} and locally bounded (that is, there exists a bounded convex neighbourhood of $0$).
\end{cor}

\begin{defi}[\hypertarget{def:banach}{Banach space}]
    A \textbf{Banach} space is a normed vector space that is \emph{complete} as a metric space, that is, any Cauchy sequence converges.
\end{defi}

\begin{eg} \leavevmode
    \begin{enumerate}[label=(\roman*)]
        \item Any finite dimensional vector space is a \hyperlink{def:banach}{Banach space} (with any norm).
        \item Let $X$ be a set, and $\mathcal{B}(X)$ the set of bounded $\K$-valued functions on $X$.
            Then $\mathcal{B}(X)$ is a Banach space with norm
            \begin{equation*}
                \norm{f}_\infty = \sup_{x \in X} \abs{f(x)} \, , \quad f \in \mathcal{B}(X)
            \end{equation*}
        \item Let $X$ be a \emph{compact} Hausdorff space (eg. $X = [0, 1]$) and $\mathcal{C}(X)$ be the space of continuous functions on $X$. Then $\mathcal{C}(X) \subset \mathcal{B}(X)$ since every continuous function on a compact space is bounded.
            In addition, $\mathcal{C}(X)$ is a Banach space, as the uniform limit of a sequence of continuous functions is continuous.
        \item Let $U \subset \R^n$ be an open, bounded subset, and let $\C^\K(\bar{U})$ be the space of $k$--times contiuously differentiable functions $f: \bar{U} \to \K$ with norm defined as follows:
            \begin{equation*}
                D^\alpha f(x) = \frac{\partial^{\abs{\alpha}}}{\partial x_1^{\alpha_1} \dots \partial x_n^{\alpha_n}} f(x)
            \end{equation*}
            for any multi-index $\alpha = (\alpha_1, \dotsc \alpha_n) \in \N_0^n$, and where $\abs{\alpha} = \sum_{i=1}^n \alpha_i$.  From here, we use the norm
            \begin{equation*}
                \norm{f}_{C^k(\bar{U})} = \max_{\abs{\alpha} \leq k} \norm {D^\alpha f}_\infty
            \end{equation*}
            Then $C^\K(\bar{U})$ is a Banach space.
        \item For a sequence $x = (x_1, x_2, \dotsc) \subset \K$, define
            \begin{equation*}
                \norm{x}_p = \left(\sum_{i=1}^\infty \abs{x_i}^p\right)^{1/p}
            \end{equation*}
            for $p \in [1, \infty)$, and $\norm{x}_\infty = \sup_i \abs{x_i}$.  Then $\ell^p = \set{x | \norm{x} < \infty}$ for $p \in [1, \infty]$ is a Banach space.  Note for $p<1$, this does not generate a norm.
        \item Let $U \subset \R^n$ be open (not necessarily bounded) and denote by $\mathcal{C}(U)$ the space of continuous functions on $U$ (not necessarily bounded). Then $\mathcal{C}(U)$ is a topological vector space with topology generated as follows.

            Let $K_i \subset U$ be compact subsets such that $K_i \subset K_{i+1}$ and $\bigcup_{i=1}^\infty K_i = U$.

            Let $V(i, n) = \Set{f | \norm{f}_{\mathcal{C}(K_i)} < \frac1n}$ where we use $\norm{f}_{\mathcal{C}(K_i)}$ to denote $\sup_{x \in K_i} \abs{f(x)}$.

            Then the topology generated by the $V(i, n)$ and their translates makes $\mathcal{C}(U)$ a \hyperlink{def:locallyConvex}{locally convex} \hyperlink{def:topologicalVectorSpace}{topological vector space}, and the topology on $\mathcal{C}(U)$ is generated by the metric
            \begin{equation*}
                d(f, g) = \sum_{i=1}^\infty 2^{-i} \frac{\norm{f-g}_{\mathcal{C}(K_i)}}{1 + \norm{f-g}_{\mathcal{C}(K_i)}}
            \end{equation*}
            This is not a Banach space, but it is a Frechet space.

        \item Let $X = \set{f : [0, 1] \to \K \; \text{continuous}}$. Then
            \begin{equation*}
                \norm{f}_p = \left(\int_0^1 \abs{f(x)}^p dx\right)^\frac1p
            \end{equation*}
            for $p \in [1, \infty)$ is a norm on $X$. However, $X$ is not complete with this norm.
    \end{enumerate}
\end{eg}

% this should be 1.2
\subsection{Bounded linear maps and the dual space}

\begin{fact}
    In any \hyperlink{def:topologicalVectorSpace}{topological vector spaces} $V$, $W$, a linear map $T: V \to W$ is continuous if and only if it is continuous at $0$.
\end{fact}

\begin{proof}
    Let $T$ be continuous at $0$ and $v \in V$. Let $w = Tv$ and $U \subset W$ an open neighbourhood of $w$. Then $U - w$ is an open neighbourhood of $0 \in W$. Since $T$ is continuous at $0$, $T^{-1}(U - w)$ contains an open neighbourhood $U' \subset V$ of $0$.
    By linearity, $T(v + U') = Tv + T(U') \subset Tv + U - w = U$.  Since $v + U'$ is an open neighbourhood of $v$ this means that $T$ is continuous at $v$.
\end{proof}

\begin{defi}[\hypertarget{def:boundedLinearMap}{Bounded linear map}]
    Let $V, W$ be \hyperlink{def:topologicalVectorSpace}{topological vector spaces} and $T: V \to W$ a linear map. Then $T$ is \textbf{bounded} if $T(B)$ is bounded for any bounded $B \subset V$.
\end{defi}

\begin{fact}
    If $V, W$ are \hyperlink{def:normedVectorSpace}{normed vector spaces}, a linear map $T: V \to W$ is \hyperlink{def:boundedLinearMap}{bounded} iff there is $\lambda > 0$ such that
    \begin{equation*}
        T(B_1(0)) \subset B_\lambda(0) \quad \text{i.e.} \quad \norm{Tv} < \lambda \; \text{if} \; \norm{v} \le 1
    \end{equation*}
\end{fact}

\begin{defi}[\hypertarget{def:opNorm}{Operator norm}]
    Let $V, W$ be \hyperlink{def:normedVectorSpace}{normed vector spaces}. The \textbf{operator norm} of a linear map $T: V \to W$ is
    \begin{equation*}
        \norm{T} = \sup_{\norm{v} = 1} \norm{T v} =\sup_{\norm{v} \leq 1} \norm{T v}
    \end{equation*}
\end{defi}

Denote by $\mathcal{L}(V,W)$ the space of linear maps $V \to W$ and by $\mathcal{B}(V, W)$ the space of \hyperlink{def:boundedLinearMap}{bounded linear maps} $V \to W$.

\begin{fact}
    The \hyperlink{def:opNorm}{operator norm} $\norm{\cdot}$ is a norm on $\mathcal{B}(V, W)$.
\end{fact}


\begin{prop}
    Let $V, W$ be \hyperlink{def:normedVectorSpace}{normed vector spaces}. Then a linear map $T: V \to W$ is \hyperlink{def:boundedLinearMap}{bounded} if and only if it is continuous.
\end{prop}

\begin{proof}
    \leavevmode
    \begin{itemize}
        \item $T$ bounded $\implies T$ continuous

            Assume $\norm{v_k - v} \to 0$. Then
            \begin{equation*}
                \norm{T v_k - T v} \leq \underbrace{\norm{T}}_{< \infty} \underbrace{\norm{v_k - v}}_{\to 0} \to 0
            \end{equation*}
        \item $T$ continuous $\implies$ $T$ bounded

            Since $T$ is continuous, $T^{-1} (B_1(0))$ contains an open ball $B_\epsilon(0) \subset V$. Thus
            \begin{equation*}
                T(B_1(0)) = \epsilon^{-1} T(B_\epsilon(0)) \subset \epsilon^{-1} B_1(0) = B_{\epsilon^{-1}}(0)
            \end{equation*}
            so $T$ is bounded.
    \end{itemize}
\end{proof}

\begin{defi}[\hypertarget{def:dualSpace}{Dual space}]
    Let $V$ be a \hyperlink{def:topologicalVectorSpace}{topological vector space}. The (topological) \textbf{dual space} of $V$ is the space of continuous linear maps $V \to \K$, denoted by $V^*$. In a \hyperlink{def:normedVectorSpace}{normed space}, $V^* = \mathcal{B}(V, \K)$. (We call $\mathcal{L}(V, \K)$ the algebraic dual of $V$.)
\end{defi}

\begin{prop}
    Let $V$ be a \hyperlink{def:normedVectorSpace}{normed vector space} and $W$ a \hyperlink{def:banach}{Banach space}. Then $\mathcal{B}(V, W)$ is a Banach space.
\end{prop}

\begin{proof}
    Let $(T_i) \subset \mathcal{B}(V, W)$ be a Cauchy sequence.  We aim to show that there is some $T \in \mathcal{B}(V, W)$ such that $T_i \to T$.
    For any vector $v \in V$, the sequence $(T_i v) \subset W$ is Cauchy:
    \begin{equation*}
        \norm{T_i v - T_j v} \leq \underbrace{\norm{T_i - T_j}}_{\leq \epsilon} \cdot \norm{v}
    \end{equation*}
    Since $W$ is complete, $T_i v$ converges, and define $T v$ as this pointwise limit.
    \begin{itemize}
        \item $T$ is linear:
            \begin{align*}
                T(\lambda v + \mu w) &= \lim_{i \to \infty} T_i (\lambda v + \mu w) \\
                                     &= \lambda \lim_{i \to \infty} T_i v + \mu \lim_{i \to \infty} T_i w \\
                                     &= \lambda T v + \mu T w
            \end{align*}
        \item $T$ is bounded:
            For $\norm{v} \leq 1$,
            \begin{align*}
                \norm{Tv} &\leq \underbrace{\norm{T_i v}}_{\leq \norm{T_i}} + \underbrace{\norm{T_i v - T v}}_{<1 \; \text{for} \; i > N(v)} \\
                &\leq \sup_i \norm{T_i} + 1\\
                &\leq \infty
            \end{align*}

        \item $T_i \to T$ in norm:
            \begin{align*}
                \norm{T_i v - T v} &\leq \underbrace{\norm{T_i v - T_j v}}_{\leq \norm{T_i - T_j}} + \underbrace{\norm{T_j v - T v}}_{< \epsilon \; \text{for} \; j > N(\epsilon, v),\, j \geq i} \\
                \implies \norm{T_i - T} &\to 0 \; \text{as} \; i \to \infty
            \end{align*}
    \end{itemize}
\end{proof}

\begin{cor}
    Let $V$ be a \hyperlink{def:normedVectorSpace}{normed vector space}. Then $V^*$ is a \hyperlink{def:banach}{Banach space}.
\end{cor}

\begin{defi}[\hypertarget{def:dualMap}{Dual map}]
    Let $V, W$ be \hyperlink{def:normedVectorSpace}{normed vector space} and $T \in \mathcal{B}(V, W)$. Then the \textbf{adjoint} or \textbf{dual map} $T^*: W^* \to V^*$ is defined by
    \begin{equation*}
        [T^* f] v = f(T v) \quad f \in W^*, \, v \in V
    \end{equation*}
\end{defi}

\begin{fact}
    We can easily see $T^* f$ is in $V^* = \mathcal{B}(V, K)$ and we can check $\norm{T^*} \leq \norm{T}$:
\end{fact}

\begin{proof}
    \begin{align*}
        \norm{(T^* f) v} &= \norm{f(T v)} \\
                         &\leq \norm{f} \norm{Tv} \\
                         &\leq \norm{f} \norm{T} \norm{v} \\
        \implies \norm{T^* f} &\leq \norm{f} \norm{T} \\
        \implies \norm{T^*} &\leq \norm{T} \\
    \end{align*}
    Later we will see this last inequality is in fact equality.
\end{proof}


\begin{defi}
    Let $V$ be a \hyperlink{def:normedVectorSpace}{normed vector space}. The \textbf{double dual} of $V$ is the \hyperlink{def:dualSpace}{dual space} of $V^*$, that is $V^{**} = (V^*)^*$.
\end{defi}

\begin{fact}
    The map $\phi: V \to V^{**}, v \mapsto \widetilde v$ where $\widetilde v(f) = f(v)$, $f \in V^*$ is \hyperlink{def:boundedLinearMap}{bounded} and linear.
\end{fact}

\begin{remark}
    The Hahn-Banach Theorem implies that $\phi$ is isometric (injective), so $V$ can be considered a subspace of $V^{**}$. In general, $\phi$ is not surjective.
\end{remark}

\begin{defi}[\hypertarget{def:reflexive}{Reflexive space}]
    A Banach space is \textbf{reflexive} if $\phi$ is a bijection.
\end{defi}

\begin{eg}
    \leavevmode
    \begin{itemize}
        \item Let $V, W$ be finite-dimensional vector spaces. Then any linear map $T:V \to W$ is \hyperlink{def:boundedLinearMap}{bounded} with respect to any \hyperlink{def:normedVectorSpace}{norms} on $V, W$, and $T$ can be represented by a matrix while $T^*$ is represented by the transpose of $T$.
            Finite dimensional normed vector spaces are \hyperlink{def:reflexive}{reflexive}.
        \item The map $T : \ell^p \to \ell^p, \; (x_1, x_2, \dotsc) \mapsto (0, x_1, x_2, \dotsc)$ is bounded, $\norm{T} = 1$, injective but not surjective.
        \item The derivative map $D: C^1 [0, 1] \to C^0 [0, 1]$ is
            \begin{itemize}[label={}]
                \item bounded as a map $C^1 [0, 1], \; \norm{f}_\infty + \norm{f'}_\infty$ to $C^0[0, 1] \; \norm{f}_\infty$
                \item unbounded as a map $C^1 [0, 1], \; \norm{f}_\infty$ to $C^0[0, 1], \; \norm{f}_\infty$
            \end{itemize}
        % \item The map $\id: C^1[0, 1], \; \norm{\cdot}_\infty \to C^1[0, 1], \; \norm{\cdot}_\infty + \norm{\cdot'}_\infty$ is unbounded.
    \end{itemize}
\end{eg}

\subsection{Finite-dimensional normed spaces}
\begin{fact}
    Any finite dimensional vector space can be identified with $\K^n$ for some $n$ by choosing a basis.
\end{fact}

\begin{defi}[\hypertarget{def:eqNorms}{Norm equivalence}]
    Two norms $\norm{\cdot}_1$ and $\norm{\cdot}_2$ on a vector space $V$ are \textbf{equivalent} if there exists $C > 0$ such that
    \begin{equation*}
        C^{-1} \norm{v}_2 \leq \norm{v} \leq C \norm{v}_2
    \end{equation*}
    for $v \in V$.
\end{defi}

\begin{prop}
    All norms on a finite dimensional space are \hyperlink{def:eqNorm}{equivalent}.
\end{prop}

\begin{proof}
    If suffices to check that any norm $\norm{\cdot}$ on $\K^n$ is equivalent to $\norm{\cdot}_1$ where
    \begin{equation*}
        \norm{v}_1 = \sum_{i=1}^n \abs{v_i}
    \end{equation*}

    \begin{itemize}
        \item $\norm{v} \leq C \norm{v}_1$: Let $e_i = (0, \dotsc, 0, 1, 0, \dotsc) \in \K^n$. Then
            \begin{equation*}
                \norm{v} = \norm{\sum_{i=1}^n v_i e_i} \leq \sum_{i=1}^n \norm{v_i} \norm{e_i} \leq \left(\max_{i=1,\dotsc,n} \norm{e_i}\right) \norm{v}_1
            \end{equation*}

        \item $\norm{v}_1 \leq \norm{v}$: Let $S = \set{v \in \K^n | \norm{v}_1 = 1}$ and $f = S \to \R$, given by $v \mapsto \norm{v}$.
            \begin{enumerate}
                \item $f$ is continuous with respect to $\norm{\cdot}_1$ topology:
                    \begin{equation*}
                        \abs{f(v) - f(w)} = \abs{\norm{v} - \norm{w}} \leq \norm{v - w} \leq C \norm{v-w}_1
                    \end{equation*}
                \item $S$ is compact with respect to $\norm{\cdot}_1$ topology:
                    It is closed as the inverse image of $\{1\}$ under $\norm{\cdot}_1$, and it is bounded by definition.
            \end{enumerate}
            So, f is a continuous function on a compact set, and hence attains its minimum.
            Since $\norm{\cdot}$ and $\norm{\cdot}_1$ are norms (positive definite), this minimum must be strictly positive.
            So, \begin{equation*}\norm{v} = f(v) \geq f(v_0) = c\end{equation*} for all $\norm{v}_1 = 1$.
            For arbitrary $v \in \K^n$, we have
            \begin{equation*}
                \norm{v} = \norm{v}_1 \norm{\frac{v}{\norm{v}_1}} = \norm{v_1} f\left(\frac{v}{\norm{v}_1}\right) \geq c \norm{v}_1
            \end{equation*}
    \end{itemize}
\end{proof}

\begin{cor}
    In any finite-dimensional \hyperlink{def:normedVectorSpace}{normed space}, the closed unit ball is compact.
\end{cor}

\begin{cor}
    Every finite-dimensional normed space is a \hyperlink{def:banach}{Banach space}.
\end{cor}

\begin{proof}
    Let $(v_i)$ be Cauchy, then $(v_i)$ is bounded, that is $(v_i) \subset \overline{B_R(0)}$ for some $R > 0$. But then $\overline{B_R(0)}$ is compact, so $(v_i)$ converges.
\end{proof}

\begin{cor}
    Let $V$ be a normed space, $W \subset V$ a finite-dimensional subspace. Then $W$ is closed.
\end{cor}

\begin{cor}
    Let $V$ be a normed space, $W$ be a finite-dimensional normed space and $T: W \to V$ is linear, then $T$ is bounded.
\end{cor}

\begin{proof}
    Since $\Im T$ is finite dimensional, we can assume without loss of generality that $V$ is finite dimensional.
    Moreover, we can assume $V = \K^m, \norm{\cdot}_\infty$ and $W = \K^n, \norm{\cdot}_1$.
    Let $(T_{ij})$ be the matrix associated to $T$.

    \begin{equation*}
        T(w_1, \dotsc, w_n)= \left(\sum_{i=1}^n T_{1i} w_i, \dotsc, \sum_{i=1}^n T_{mi} w_i\right) \in V \\
    \end{equation*}
    \begin{align*}
        \implies \norm{Tw}_\infty &= \max_{j = 1, \dotsc, m} \abs{(Tw)_j} \\
                                  &= \max_{j = 1, \dotsc, m} \abs{\sum_{i=1}^n T_{ji} w_i} \\
                                  &\leq \max_{i,j} \abs{T_{ji}} \sum_{i=1}^n \abs{w_i} \\
                                  &= C(T) \norm{w}_1
    \end{align*}
\end{proof}

\begin{thm}
    Let $V$ be a \hyperlink{def:normedVectorSpace}{normed vector space} such that $\overline{B_1(0)}$ is compact. Then $V$ is finite-dimensional.
\end{thm}

\begin{proof}
    Since $\overline{B_1(0)}$ is compact, there are $w_1, \dotsc, w_n \in V$ such that
    \begin{equation*}
        \overline{B_1(0)} \subset \bigcup_{i=1}^n B_{\frac12} (w_i)
    \end{equation*}
    Let $W = \mathrm{span}\set{w_1, \dotsc, w_n}$. Note that $\dim W \leq n$. Our goal is to show $W = V$.
    \begin{align*}
        B_1(0) &\subset W + B_{\frac{1}{2}} (0) \\
        B_1(0) &\subset W + \frac{1}{2}\left(W + B_{\frac{1}{2}} (0)\right) = W + B_{\frac{1}{4}}(0) \\
    \end{align*}
    By induction, $B_1(0) \subset W + B_{2^{-i}}(0)$ for any $i \in \N$, hence $B_1(0) \subset \overline{W} - W$. Since $V$ is a vector space, $V \subset W$, and so $\dim V \leq n$.
     % missing stuff
\end{proof}

\clearpage

\section{The Hahn-Banach Theorem}

\begin{defi}[Extends\hypertarget{def:extend}]
    Given vector spaces $W \subset V$, and linear maps $g: W \to \K$, $f: V \to \K$, we say that $f$ \textbf{extends} $g$ if $f \mid_W = g$, that is $f(v) = g(v)$ for every $v \in W$.
\end{defi}

When can one \hyperlink{def:extend}{extend} a linear map in a continuous way?

\subsection{Finite codimension}

Let $V$ be a \emph{real} vector space.

\begin{defi}[Extends\hypertarget{def:sublinear}]
    A map $p: V \to \R$ is \textbf{sublinear} if
    \begin{enumerate}
        \item $p(\alpha v) = \alpha p(v)$ for all $v \in V$, $\alpha \geq 0$
        \item $p(v + w) \leq p(v) + p(w)$ for all $v, w \in V$.
    \end{enumerate}
\end{defi}

\begin{eg}
    Any norm is \hyperlink{def:sublinear}{sublinear}.
\end{eg}

\begin{lemma}[Codimension $1$ case of the Hahn-Banach Theorem]\hypertarget{lem:smallHahn}
    Let $W \subset V$ be a subspace of codimension 1, that is, there exists $v_1 \in V \setminus W$ such that
    \begin{equation*}
        V = \set{v + t v_1 | v \in W, \, t \in \R}
    \end{equation*}
    Let $p: V \to \R$ be \hyperlink{def:sublinear}{sublinear}, and $g: W \to \R$ linear with $ g(v) \leq p(v) $ for all $v \in W$.
    Then there exists a linear map $f: V \to \R$ that \hyperlink{def:extend}{extends} $g$ and $f(v) \leq p(v)$ for all $v \in V$.
\end{lemma}

\begin{proof}
    We will find $\alpha \in \R$ such that $f_\alpha: V \to \R$ defined by
    \begin{equation*}
        f_\alpha(v + tv_1) = g(v) + t\alpha
    \end{equation*}
    for all $v \in W$, $t \in \R$ is the asserted linear extension of $g$. Let
    \begin{equation*}
        \alpha = \sup_{v \in W} (g(v) - p(v - v_1))
    \end{equation*}

    We proceed with a sequence of claims which will complete the proof.

    \paragraph{Claim} $\alpha < \infty$.
    By linearity of $g$ and \hyperlink{def:sublinear}{sublinearity} of $p$,
    \begin{equation*}
        g(v) + g(w) = g(v + w) \leq p(v + w) \leq p(v - v_1) + p(w + v_1)
    \end{equation*}
    for all $v, w \in W$. % (*)

    So, $g(v) - p(v - v_1) \leq p(w + v_1) - g(w)$ and hence $\alpha \leq p(w + v_1) - g(w) < \infty$.

    \paragraph{Claim} $f_\alpha(v - v_1) \leq p(v - v_1)$ for all $v \in W$.
    \begin{align*}
        f_\alpha(v - v_1) &= g(v) - \alpha \\
                          &= \underbrace{g(v) - p(v - v_1)}_{\leq \alpha} - \alpha + p(v - v_1) \\
                          &\leq p(v - v_1)
    \end{align*}

    \paragraph{Claim} $f_\alpha(w + v_1) \leq p(w + v_1)$ for all $w \in W$.
    By (*),
    \begin{align*}
        f_\alpha(w + v_1) &= g(w) + \alpha \\
                          &\leq \alpha - \underbrace{(g(v) - p(v-v_1))}_{\sup = 0} + p(w + v_1) \\
        \implies f_\alpha(w + v_1) &\leq p(w + v_1)
    \end{align*}

    \paragraph{Claim} $f_\alpha(v + t v_1) \leq p(v + t v_1)$ for all $v \in W$, $t \in \R$.
    By linearity of $f$ and positive homogeneity of $p$, for any $t > 0$,
    \begin{align*}
        f(v \pm t v_1) &= t f\left(\frac vt \pm v_1\right) \\
                       &\leq t p\left(\frac vt \pm v_1\right) \\
                       &= p(v \pm t v_1)
    \end{align*}
\end{proof}

\begin{cor}
    The same statement holds if $W \subset V$ is a subspace of \emph{finite} codimension.
\end{cor}

\begin{proof}
    By induction.
\end{proof}

\subsection{Zorn's Lemma}

\begin{defi}\hypertarget{def:poset}
    \leavevmode
    \begin{enumerate}[label=(\roman*)]
        \item A partially ordered set (\textbf{poset}) is a set $p$ with a binary relation $\leq$ such that for all $x, y \in P$ either $x \leq y$ or $x \nleq y$, and
            \begin{align*}
                x &\leq x & \text{(reflexive)} \\
                x &\leq y, \, y \leq z \implies x \leq z & \text{(transitive)} \\
                x &\leq y, \, y \leq x \implies x = y & \text{(antisymmetric)}
            \end{align*}

        \item Let $P$ be a poset. A subset $T \subset P$ is called \textbf{totally ordered} (or a chain) if $x \nleq y \implies y \leq x$, that is, at least one of $x \leq y$ or $y \leq x$ must hold.

        \item Let $P$ be a poset and $U \subseteq$ a subset. Then
            \begin{itemize}
                \item $b \in P$ is an \textbf{upper bound} for $U$ if $x \leq b$ for all $x \in U$
                \item $l \in P$ is a \textbf{least upper bound} for $U$ if $l$ is an upper bound and any other upper bound $b$ for $U$ satisfies $l \leq b$.
            \end{itemize}

        \item Let $P$ be a poset. An element $m \in P$ is \textbf{maximal} if $m \leq x \implies m = x$.
    \end{enumerate}
\end{defi}

\begin{lemma}[Zorn's Lemma]\hypertarget{lem:zorn}
    Let $P$ be a \hyperlink{def:poset}{poset} with the property that every non-empty \hyperlink{def:poset}{totally ordered} subset has a \hyperlink{def:poset}{least upper bound}.
    Then $P$ has at least one \hyperlink{def:poset}{maximal element}.
\end{lemma}

\begin{remark}
    \leavevmode
    \begin{enumerate}[label=(\roman*)]
        \item \hyperlink{lem:zorn}{Zorn's Lemma} is trivial if $P$ is finite.
        \item In infinite \hyperlink{def:poset}{posets}, it is equivalent to the Axiom of Choice (assuming the usual other axioms of set theory).
    \end{enumerate}
\end{remark}

Recall that in a vector space $V$, elements $v_1, \dotsc, v_k$ are linearly independent if
\begin{equation*}
    \sum_{i=1}^k \alpha_i v_i = 0 \implies \alpha_1 = \alpha_2 = \dotsb \alpha_k = 0
\end{equation*}

A set $S \subset V$ is linearly independent if any \emph{finite} subset is.

A basis of $V$ is a set $B \subset V$ that is linearly independent and such that every element of $V$ is a \emph{finite} linear combination of elements of $B$.

\begin{prop}
    Let $V \neq \{0\}$ be a vector space and $S \subset V$ linearly independent. Then $V$ has a basis $B$ containing $S$.
\end{prop}

\begin{proof}
    Let $P = \set{T \subset V | T \supset S, T \text{ linearly independent}}$. Then $P$ is a poset with partial order $\subseteq$, ie $T_1 \leq T_2$ if and only if $T_1 \subseteq T_2$. For any $L \subseteq P$ that is totally ordered, set $T_b = \bigcup_{T \in L} T$.

    We claim $T_b \in P$ and $T_b$ is a least upper bound for $L$. Clearly, $S \subseteq T_b$.
    Let $\alpha_i \in K$ and $v_i \in T_b$ such that $\sum_{i=1}^m \alpha_i v_i = 0$. Since $L$ % ???
    is totally ordered and $m < \infty$, there must be $T \in L$ such that $v_1, \dotsc, v_m \in T$.
    Since $T$ is linearly independent, we have $\alpha_1 = \dotsb = \alpha_m = 0$. Thus $T_b$ is linearly independent.
    Thus, $T_b \in P$ and clearly a least upper bound for $L$.

    By \hyperlink{lem:zorn}{Zorn's Lemma}, there exists a maximal element $B$ in $P$.

    Claim: $B$ is a basis for $V$. By definition of $P$, $B$ is linearly independent. We need to check that $B$ spans $V$.
    Suppose otherwise. Then there exists $v \in V \setminus \span{B}$ and $B \cup \{v\}$ is linearly independent.
    This contradicts the maximality of $B$, so $B$ is a basis for $V$.
\end{proof}

\subsection{The Hahn-Banach Theorem}

\begin{thm}[Hahn-Banach]\hypertarget{thm:hahnBanach}
    Let $V$ be a \emph{real} vector space, $W \subset V$ a subspace, $p: V \to \R$ sublinear, and $g: W \to \R$ linear such that $g(v) \leq p(v)$ for all $v \in W$.

    Then there exists $f: V \to \R$ linear such that $f|_W = g$ and $f(v) \leq p(v)$ for all $v \in V$.
\end{thm}

\begin{proof}
    Let
    \begin{equation*}
        P = \set{(N, h) | N \subset V \text{ subspace}, \, W \subset N, h: N \to \R \text{ linear}, \, h(v) \leq p(v) \, \forall v \in N}
    \end{equation*}

    For $(N, h), \, (N', h') \in P$, set $(N, h) \leq (N', h')$ iff $N \subset N'$ and $h' |_N = h$.
    Then $P$ is a poset, $P \neq \emptyset$ because $(W, g) \in P$. We want to apply \hyperlink{lem:zorn}{Zorn's Lemma}.

    Let $(N_i, h_i)_{i \in I} \subseteq P$ be a totally ordered subset of $P$. Set
    \begin{equation*}
        N = \bigcup_{i \in I} N_i, \quad h(v) = h_i(v) \; \text{if } v \in N_i
    \end{equation*}

    This is well-defined since $(N_i, h_i)_{i \in I}$ is totally ordered. Moreover, $N \subseteq V$ is a subspace and $h: N \to \R$ is linear. Also $h(v) \leq p(v)$ for all $v \in \N$. Thus, $(N, h) \in P$. Clearly, $(N, h)$ is a least upper bound for $(N_i, h_i)_{i \in I}$.

    By Zorn's Lemma, there is a maximal element $(M, f)$ in $P$.

    Claim: $M=V$. Suppose not, then the \hyperlink{lem:smallHahn}{codimension $1$ case} gives $(M', f')$ with $(M, f) \nleq (M', f')$, a contradiction by maximality of $(M, f)$.
\end{proof}

\begin{cor}
    Let $V$ be a normed vector space (real or complex), $W \subseteq V$ a subspace.
    For any $g \in W^*$, there exists $f \in V^*$ such that $f |_W = G$, $\norm{f} \leq \norm{g}$.
\end{cor}

\begin{proof}
    Asume that $V$ is real. The complex case is treated on an example sheet. Then $p(v) = \norm{v}$ is sublinear and the claim follows directly from the \hyperlink{thm:hahnBanach}{general Hahn-Banach Theorem}.
\end{proof}

\begin{cor}
    Let $V$ be a normed vector space, and $v \in V$. Then there exists $f_v \in V^*$ such that $\norm{f_v} = 1$ and $f_v(v) = \norm{v}$.
    Such an $f_v$ is called a \textbf{support functional} for $v$.
\end{cor}

\begin{proof}
    Let $W = \set{t v | t \in K}$. Define $g \in W^*$ by $g(tv) = t \norm{v}$. Then $\norm{g} = 1$ and $g(v) = \norm{v}$. By \hyperlink{thm:hahnBanach}{Hahn-Banach}, there is $f = f_v$ as desired.
\end{proof}

\begin{remark}
    In concrete examples, one can often construct $f_v$ by hand.
\end{remark}

\begin{cor}
    Let $V$ be a normed vector space and $v \in V$. THen $v =0 \iff f(v) = 0$ for all $f \in V^*$.  In particular, $V^* \neq \{0\}$.
\end{cor}

\begin{cor}
    Let $V$ be a normed space, $v, w \in V$, $v \neq w$. Then $\exists f \in V^*$ such that $f(v) \neq f(w)$.
\end{cor}

\begin{proof}
    Take $f = f_{v - w}$.
\end{proof}

\begin{cor}
    The map $\phi: V \to V^{**}$ given by $\phi(v) f = f(v)$ is an isometry:
    \begin{equation*}
        \forall v \in V, \, \norm{\phi(v)} = \norm{v}
    \end{equation*}
\end{cor}

\begin{proof}
    We have seen $\norm{\phi(v)} \leq \norm{v}$. Now
    \begin{equation*}
        \abs{\phi(v) f_v} = \abs{f_v(v)} = \norm{v} \implies \norm{\phi(v)} \geq \norm{v}
    \end{equation*}
\end{proof}

\begin{cor}
    Let $V, W$ be normed spaces.
    For any $T \in \mathcal{B}(V, W)$, the dual map $T^* \in \mathcal{B}(W^*, V^*)$ satisfies $\norm{T^*} = \norm{T}$.
\end{cor}

\begin{proof}
    We have already seen $\norm{T^*} \leq \norm{T}$. Now, with $f = f_{T_v} \in W^*$, $ [T^* f] v = f(T v) = \norm{Tv} $ so
    \begin{align*}
        \norm{T^*} &= \sup_{\norm{f} \leq 1} \norm{T^* f} \\
                   &\geq \norm{T^* f_{T_v}} \\
                   &= \sup_{\norm{v} \leq 1} \norm{[T^* f_{T_v}] v} \\
                   &\geq \sup_{\norm{v} \leq 1} \norm{T v} \\
                   &= \norm{T}
    \end{align*}
\end{proof}
\end{document}
